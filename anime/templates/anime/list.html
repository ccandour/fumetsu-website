{% extends "fumetsu/base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}
{{test}}
<div class="col-12 col-md-9 col-lg-8 float-start">
	<h2 >Lista Anime</h2>
    <form method="POST" enctype="multipart/form-data">
    <div class="d-flex flex-column align-items-center mb-5">
    <div class="d-flex flex-row col-md-9 gap-2">
        {% csrf_token %}
        <input type="text" class="form-control form-control-lg w-sm-100" placeholder="Nazwa anime" aria-label="Large input example">

        <button class="btn-none float-end" name="upd_urls" type="submit"><div class="ser"><i class="fas fa-search"></i></div></button>
        <button class="btn-none float-end" name="ses_cl"><div class="ser"><i class="fas fa-times"></i></div></button>
        <a class="btn-none float-end" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
            Tagi
        </a>
        <div class="clearfix"></div>
        <div class="space"></div>
        <div class="collapse" id="collapseExample">
            {% for field in filter.ch_box %}
                {{field}}
            {% endfor %}

            <form method="POST" name="page_stack">
                {% csrf_token %}
                <div>
                Wyswietlaj
                <button class="btn-none" name="page_12"><i>12</i></button>
                <button class="btn-none" name="page_24"><i>24</i></button>
                <button class="btn-none" name="page_48"><i>48</i></button>
                anime
                </div>
            </form>
        </div>
    </div>
    </div>
    </form>

</div>
<!-- Actual list of anime -->
<div class=" d-flex flex-column col-12 col-lg-8 anime-list gap-3">
    {% if not_found %}
        {{not_found}}
    {% else %}
    	{% for post in posts %}
            <a href="{% url 'anime-nm' post.0.web_name %}">
            <div class="card list-card overflow-hidden">
                <div class="row g-0">
                    <div class="col-sm-2">
                        <img src="{{ post.0.cover_image }}" alt="...">
                    </div>
                    <div class="col-sm-10">
                        <div class="card-body">
                            <h5 class="card-title mb-1">{{ post.0.name_english }}</h5>
                            <div class="card-text mb-2">{{ post.0.name_romaji }}</div>
                            <div class="d-flex flex-row">
                                    {% for tag in post.1 %}
                                        <button class="btn btn-secondary me-1">{{ tag }}</button>
                                    {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </a>
    	{% endfor %}
    {% endif %}
</div>
<div class="col-12 col-lg-8 float-start">
    <div class="text-center controls">
    <form method="POST">
        {% csrf_token %}
        {% if page|add:"-1" > 0 %}
        <button class="btn btn-op" name="page_ch" value={{page|add:"-1"}}><i class="fas fa-chevron-left"></i></button>
        {% endif %}

        {% if page|add:"-2" > 0 %}
        <button class="btn btn-op" name="page_ch" value="1">1</button>
        {% endif %}
        {% if page|add:"-1" > 0 %}
        <button class="btn btn-op" name="page_ch" value={{page|add:"-1"}}>{{page|add:"-1"}}</button>
        {% endif %}
        <div class="btn btn-current">{{page}}</div>
        {% if page|add:"+1" <= page_max %}
        <button class="btn btn-op" name="page_ch" value={{page|add:"+1"}}>{{page|add:"+1"}}</button>
        {% endif %}
        {% if page|add:"+2" <= page_max %}
        <button class="btn btn-op" name="page_ch" value={{page|add:"+2"}}>{{page|add:"+2"}}</button>
        {% endif %}
        {% if page|add:"+1" <= page_max %}
        <button class="btn btn-op" name="page_ch" value={{page|add:"+1"}}><i class="fas fa-chevron-right"></i></button>
        {% endif %}
    </form>
</div>
{% endblock content %}